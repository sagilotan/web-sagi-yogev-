<!DOCTYPE html>
<html lang="en">
<head>
	<title>Web-app</title>
  <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<meta name="viewport" content="width=device-width, initial-scale=1" >

<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script>
var app = angular.module('myApp', []);
app.controller('tableCtrl', function($scope, $http) {
    $http.get("LeaderBoard").then(function(response) {
        $scope.myData = response.data;
    });
    
});

app.controller('modelCtrl', function($scope) {
	$scope.model=function(){
		$.post("Name",{},function(data, status){
			$scope.y=data;
	    })};
    
});

</script>



	<script type="text/javascript">

	function startTime() {
		
	var today = new Date()
	var h = today.getHours()
	var m = today.getMinutes()
	var s = today.getSeconds()
	// add a zero in front of numbers<10
	m = checkTime(m)
	s = checkTime(s)
	document.getElementById('txt').innerHTML = h+":"+m+":"+s
	t=setTimeout('startTime()',500)
	}
	function checkTime(i) {
	if (i<10) {i="0" + i}
	return i
	}

	</script>

</head>
<body onload="startTime()">


<div id="txt"></div>


<div class="container">

<div class=jumbotron>
	  <h1>Head Line</h1>
	  <h3>This is some text.</h3>
	</div>
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <div class="navbar-brand">WebSiteName</div>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="HomePage.html">Home</a></li>
      <li><a href="AddQuestion.html">add Question</a></li>
      <li ><a href="NewQuestions.html">New Questions</a></li> 
      <li><a href="Questions.html">Browse Questions</a></li> 
      <li class="active"><a href="LeaderBoard.html">Users LeaderBoard</a></li> 
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="WelcomePage.html"><span class="glyphicon glyphicon-log-in"></span>Sign Out</a></li>
    </ul>
    
  </div>
 
</nav>

<h3>Users Table Leaderboard:</h3>	

<div ng-app="myApp" ng-controller="tableCtrl">

<div ng-controller="modelCtrl"> <!--experinced controller-->
<table class="table">
    <thead>
      <tr>
        <th>Num.</th>
        <th>User's NickName</th>
        <th>User's Photo</th>
        <th>User's Rating</th>
       <th> User’s expertise profile</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="x in myData | orderBy:'Rating':true | limitTo:20">
        <td>{{ $index + 1 }}</td>
        <td><a ng-click="model()" data-toggle="modal" data-target="#{{ $index + 1 }}">{{x.UsNN}}</a></td>
        <td><img src="{{x.Photo}}" class="img-rounded" width="100" height="100" alt="User's Photo"></td>
        <td>{{x.Rating}}</td>
        <td>?</td>
      </tr>
    </tbody>
  </table>
  
  
 
 <div id="{{ $index + 1 }}" class="modal fade" role="dialog" ng-repeat="x in myData | orderBy:'Rating':true | limitTo:20" >
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><img src="{{x.Photo}}" class="img-rounded" width="100" height="100" alt="User's Photo">NickName:{{x.UsNN}}</h4>
        <h5>Rating:{{x.Rating}}</h5>
      </div>
      <div class="modal-body">
        <p>User Description:</p>
       <p> {{x.Desc}}</p>
       <p>???</p>
       <h3>User’s 5 last asked questions</h3>
       <div ng-repeat="q in x.QList">
       <h4 >in:{{q.Time}}</h4>
      <h4 class="QTop">topics:{{q.Topics}}</h4>
       <div class="TheQ">
          {{q.Message}}
          </div>
             <p>rating:{{q.Rating}}</p>
       </div>
       <h3>User’s 5 last answered questions</h3>
       
       <div ng-repeat="a in x.AList">
      
       <h4 >in:{{a.Question.Time}}</h4>
      <h4 class="QTop">topics:{{a.Question.Topics}}</h4>
       <div class="TheQ">
          {{a.Question.Message}}
          </div>
             <p>rating:{{a.Question.Rating}}</p>
         
         <div class="TheA">
           {{a.Message}}
          </div>
         <p>rating:{{a.Rating}}</p>    
             
       </div>
       
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


  
  </div>

</div> <!--myApp(ng)-->




</div> <!--container-->



</body>

  </html>
